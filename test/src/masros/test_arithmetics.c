/**
* \file         template.c
* \author       Kovalchuk Alexander (roux@yandex.ru)
* \brief        This file contains the prototypes functions which use for...
*/
//_____ I N C L U D E S _______________________________________________________
#include "unity.h"

#include <stdint.h>
#include <stdbool.h>
#include <stdlib.h>
#include <string.h>

#include "macros/arithmetics.h"
//_____ C O N F I G S  ________________________________________________________
//_____ D E F I N I T I O N S _________________________________________________
//_____ M A C R O S ___________________________________________________________
//_____ V A R I A B L E S _____________________________________________________
//_____ P R I V A T E  F U N C T I O N S_______________________________________
//_____ P U B L I C  F U N C T I O N S_________________________________________
void test_MIN(void)
{
	TEST_ASSERT_EQUAL_INT(50, MIN(100, 50));
	TEST_ASSERT_EQUAL_INT(-50, MIN(-50, 100));
	TEST_ASSERT_EQUAL_INT(1000, MIN(2000, 1000));
	TEST_ASSERT_EQUAL_INT(-2000, MIN(-2000, 1000));
	TEST_ASSERT_EQUAL_INT(10000, MIN(20000, 10000));
	TEST_ASSERT_EQUAL_INT(-20000, MIN(-20000, 10000));
}

void test_MIN_BRANCHLESS(void)
{
	TEST_ASSERT_EQUAL_INT(50, MIN_BRANCHLESS(100, 50));
	TEST_ASSERT_EQUAL_INT(-50, MIN_BRANCHLESS(-50, 100));
	TEST_ASSERT_EQUAL_INT(1000, MIN_BRANCHLESS(2000, 1000));
	TEST_ASSERT_EQUAL_INT(-2000, MIN_BRANCHLESS(-2000, 1000));
	TEST_ASSERT_EQUAL_INT(10000, MIN_BRANCHLESS(20000, 10000));
	TEST_ASSERT_EQUAL_INT(-20000, MIN_BRANCHLESS(-20000, 10000));
}

void test_MAX(void)
{
	TEST_ASSERT_EQUAL_INT(100, MAX(100, 50));
	TEST_ASSERT_EQUAL_INT(100, MAX(100, -50));
	TEST_ASSERT_EQUAL_INT(2000, MAX(1000, 2000));
	TEST_ASSERT_EQUAL_INT(1000, MAX(1000, -2000));
	TEST_ASSERT_EQUAL_INT(20000, MAX(10000, 20000));
	TEST_ASSERT_EQUAL_INT(10000, MAX(10000, -20000));
}

void test_MAX_BRANCHLESS(void)
{
	TEST_ASSERT_EQUAL_INT(100, MAX_BRANCHLESS(100, 50));
	TEST_ASSERT_EQUAL_INT(100, MAX_BRANCHLESS(100, -50));
	TEST_ASSERT_EQUAL_INT(2000, MAX_BRANCHLESS(1000, 2000));
	TEST_ASSERT_EQUAL_INT(1000, MAX_BRANCHLESS(1000, -2000));
	TEST_ASSERT_EQUAL_INT(20000, MAX_BRANCHLESS(10000, 20000));
	TEST_ASSERT_EQUAL_INT(10000, MAX_BRANCHLESS(10000, -20000));
}

void test_Equal(void)
{
	TEST_ASSERT_TRUE(IS_EQUAL(100, 100));
	TEST_ASSERT_FALSE(IS_EQUAL(100, 200));

	TEST_ASSERT_FALSE(IS_EQUAL(1000, -1000));
	TEST_ASSERT_FALSE(IS_EQUAL(2000, 1000));
	TEST_ASSERT_TRUE(IS_EQUAL(10000, 10000));
	TEST_ASSERT_FALSE(IS_EQUAL(20000, 10000));
}

void test_EVEN(void)
{
	TEST_ASSERT_FALSE(IS_EVEN(10));
	TEST_ASSERT_FALSE(IS_EVEN(100));
	TEST_ASSERT_FALSE(IS_EVEN(1000));

	TEST_ASSERT_TRUE(IS_EVEN(11));
	TEST_ASSERT_TRUE(IS_EVEN(101));
	TEST_ASSERT_TRUE(IS_EVEN(1001));
}

void test_ODD(void)
{
	TEST_ASSERT_TRUE(IS_ODD(10));
	TEST_ASSERT_TRUE(IS_ODD(100));
	TEST_ASSERT_TRUE(IS_ODD(1000));

	TEST_ASSERT_FALSE(IS_ODD(11));
	TEST_ASSERT_FALSE(IS_ODD(101));
	TEST_ASSERT_FALSE(IS_ODD(1001));
}

// void test_INVERT_SIGH(void)
// {
// 	// TEST_ASSERT_EQUAL_INT(-1, INVERT_SIGH(1));
// 	// TEST_ASSERT_EQUAL_INT(1, INVERT_SIGH(-1));

// 	TEST_ASSERT_EQUAL_INT(-100, INVERT_SIGH(100));
// 	TEST_ASSERT_EQUAL_INT(100, INVERT_SIGH(-100));
// }

void test_IS_SIGH_EQUAL(void)
{
	TEST_ASSERT_TRUE(IS_SIGH_EQUAL(1, 1));
	TEST_ASSERT_FALSE(IS_SIGH_EQUAL(1, -1));

	TEST_ASSERT_TRUE(IS_SIGH_EQUAL(100, 100));
	TEST_ASSERT_FALSE(IS_SIGH_EQUAL(100, -100));
}

void test_ARIPH_MEAN(void)
{
	TEST_ASSERT_EQUAL_INT(ARIPH_MEAN(10, 10), 10);
	TEST_ASSERT_EQUAL_INT(ARIPH_MEAN(100, 100), 100);
	TEST_ASSERT_EQUAL_INT(ARIPH_MEAN(1000, 1000), 1000);
	TEST_ASSERT_EQUAL_INT(ARIPH_MEAN(100, 60), 80);
}

void test_SWAP(void)
{
	uint32_t a = 100;
	uint32_t b = 10;

	SWAP(a, b);
	TEST_ASSERT_EQUAL_INT(a, 10);
	TEST_ASSERT_EQUAL_INT(b, 100);

	int32_t x = -100;
	int32_t y = -10;

	SWAP(x, y);
	TEST_ASSERT_EQUAL_INT(x, -10);
	TEST_ASSERT_EQUAL_INT(y, -100);
}

void test_IS_POWER_2(void)
{
	uint32_t power2 = 0x01;
	uint32_t notpower2 = 0x03;

	for (size_t i = 0; i < 31; i++)
	{
		power2 <<= 1;
		TEST_ASSERT_TRUE(IS_POWER_2(power2));
	}

	for (size_t i = 0; i < 30; i++)
	{
		notpower2 <<= 1;
		TEST_ASSERT_FALSE(IS_POWER_2(notpower2));
	}
}

void test_ROUND_UP(void)
{
	TEST_ASSERT_EQUAL_INT(117, ROUND_UP(115, 3));
	TEST_ASSERT_EQUAL_INT(116, ROUND_UP(115, 2));
	TEST_ASSERT_EQUAL_INT(120, ROUND_UP(118, 10));
}


void test_ROUND_UP_POW_2(void)
{
	TEST_ASSERT_EQUAL_INT(0, ROUND_UP_POW_2(0));
	TEST_ASSERT_EQUAL_INT(1, ROUND_UP_POW_2(1));
	TEST_ASSERT_EQUAL_INT(2, ROUND_UP_POW_2(2));

	TEST_ASSERT_EQUAL_INT(4, ROUND_UP_POW_2(3));
	TEST_ASSERT_EQUAL_INT(4, ROUND_UP_POW_2(4));

	TEST_ASSERT_EQUAL_INT(8, ROUND_UP_POW_2(5));
	TEST_ASSERT_EQUAL_INT(8, ROUND_UP_POW_2(6));
	TEST_ASSERT_EQUAL_INT(8, ROUND_UP_POW_2(7));
	TEST_ASSERT_EQUAL_INT(8, ROUND_UP_POW_2(8));

	TEST_ASSERT_EQUAL_INT(16, ROUND_UP_POW_2(10));

	TEST_ASSERT_EQUAL_INT(32, ROUND_UP_POW_2(25));

	TEST_ASSERT_EQUAL_INT(64, ROUND_UP_POW_2(46));

	TEST_ASSERT_EQUAL_INT(128, ROUND_UP_POW_2(100));

	TEST_ASSERT_EQUAL_INT(256, ROUND_UP_POW_2(156));

	TEST_ASSERT_EQUAL_INT(512, ROUND_UP_POW_2(346));
}
